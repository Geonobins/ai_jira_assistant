{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"G:/Personal_projects/ai_jira_assistant/jira_plugin/static/hello-world/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _objectSpread = require(\"G:/Personal_projects/ai_jira_assistant/jira_plugin/static/hello-world/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _asyncToGenerator = require(\"G:/Personal_projects/ai_jira_assistant/jira_plugin/static/hello-world/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports._invokeEndpointFn = exports.InvokeType = void 0;\nvar bridge_1 = require(\"../bridge\");\nvar errors_1 = require(\"../errors\");\nvar utils_1 = require(\"../utils\");\nvar MAX_NUM_OPERATIONS = 500;\nvar OPERATION_INTERVAL_SEC = 25;\nvar OPERATION_INTERVAL_MS = 1000 * OPERATION_INTERVAL_SEC;\nvar InvokeType;\n(function (InvokeType) {\n  InvokeType[\"REMOTE\"] = \"Remote\";\n  InvokeType[\"SERVICE\"] = \"Container\";\n})(InvokeType = exports.InvokeType || (exports.InvokeType = {}));\nvar callBridge = (0, bridge_1.getCallBridge)();\nvar validatePayload = function validatePayload(payload) {\n  if (!payload) return;\n  if (Object.values(payload).some(function (val) {\n    return typeof val === 'function';\n  })) {\n    throw new errors_1.BridgeAPIError('Passing functions as part of the payload is not supported!');\n  }\n};\nvar _setupInvokeEndpointFn = function _setupInvokeEndpointFn(invokeType) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(input) {\n      var callBridgePayload, bridgeResponse, _ref2, success, payload, error, response, header;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            validatePayload(input);\n            callBridgePayload = _objectSpread(_objectSpread({}, input), {}, {\n              invokeType: \"ui-\".concat(invokeType.toLowerCase(), \"-fetch\")\n            });\n            _context.next = 4;\n            return callBridge('invoke', callBridgePayload);\n          case 4:\n            bridgeResponse = _context.sent;\n            _ref2 = bridgeResponse !== null && bridgeResponse !== void 0 ? bridgeResponse : {}, success = _ref2.success, payload = _ref2.payload, error = _ref2.error;\n            response = _objectSpread({}, success ? payload : error);\n            if (response && response.headers) {\n              for (header in response.headers) {\n                if (Array.isArray(response.headers[header])) {\n                  response.headers[header] = response.headers[header].join(',');\n                }\n              }\n            }\n            return _context.abrupt(\"return\", response);\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nvar _invokeEndpointFn = function _invokeEndpointFn(invokeType) {\n  var invokeEndpointFn = _setupInvokeEndpointFn(invokeType);\n  return (0, utils_1.withRateLimiter)(invokeEndpointFn, MAX_NUM_OPERATIONS, OPERATION_INTERVAL_MS, \"\".concat(invokeType, \" invocation calls are rate limited at \").concat(MAX_NUM_OPERATIONS, \"/\").concat(OPERATION_INTERVAL_SEC, \"s\"));\n};\nexports._invokeEndpointFn = _invokeEndpointFn;","map":{"version":3,"names":["_regeneratorRuntime","require","default","_objectSpread","_asyncToGenerator","Object","defineProperty","exports","value","_invokeEndpointFn","InvokeType","bridge_1","errors_1","utils_1","MAX_NUM_OPERATIONS","OPERATION_INTERVAL_SEC","OPERATION_INTERVAL_MS","callBridge","getCallBridge","validatePayload","payload","values","some","val","BridgeAPIError","_setupInvokeEndpointFn","invokeType","_ref","mark","_callee","input","callBridgePayload","bridgeResponse","_ref2","success","error","response","header","wrap","_callee$","_context","prev","next","concat","toLowerCase","sent","headers","Array","isArray","join","abrupt","stop","_x","apply","arguments","invokeEndpointFn","withRateLimiter"],"sources":["G:/Personal_projects/ai_jira_assistant/jira_plugin/static/hello-world/node_modules/@forge/bridge/out/invoke-endpoint/invoke-endpoint.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._invokeEndpointFn = exports.InvokeType = void 0;\nconst bridge_1 = require(\"../bridge\");\nconst errors_1 = require(\"../errors\");\nconst utils_1 = require(\"../utils\");\nconst MAX_NUM_OPERATIONS = 500;\nconst OPERATION_INTERVAL_SEC = 25;\nconst OPERATION_INTERVAL_MS = 1000 * OPERATION_INTERVAL_SEC;\nvar InvokeType;\n(function (InvokeType) {\n    InvokeType[\"REMOTE\"] = \"Remote\";\n    InvokeType[\"SERVICE\"] = \"Container\";\n})(InvokeType = exports.InvokeType || (exports.InvokeType = {}));\nconst callBridge = (0, bridge_1.getCallBridge)();\nconst validatePayload = (payload) => {\n    if (!payload)\n        return;\n    if (Object.values(payload).some((val) => typeof val === 'function')) {\n        throw new errors_1.BridgeAPIError('Passing functions as part of the payload is not supported!');\n    }\n};\nconst _setupInvokeEndpointFn = (invokeType) => async (input) => {\n    validatePayload(input);\n    const callBridgePayload = {\n        ...input,\n        invokeType: `ui-${invokeType.toLowerCase()}-fetch`\n    };\n    const bridgeResponse = await callBridge('invoke', callBridgePayload);\n    const { success, payload, error } = bridgeResponse !== null && bridgeResponse !== void 0 ? bridgeResponse : {};\n    const response = { ...(success ? payload : error) };\n    if (response && response.headers) {\n        for (const header in response.headers) {\n            if (Array.isArray(response.headers[header])) {\n                response.headers[header] = response.headers[header].join(',');\n            }\n        }\n    }\n    return response;\n};\nconst _invokeEndpointFn = (invokeType) => {\n    const invokeEndpointFn = _setupInvokeEndpointFn(invokeType);\n    return (0, utils_1.withRateLimiter)(invokeEndpointFn, MAX_NUM_OPERATIONS, OPERATION_INTERVAL_MS, `${invokeType} invocation calls are rate limited at ${MAX_NUM_OPERATIONS}/${OPERATION_INTERVAL_SEC}s`);\n};\nexports._invokeEndpointFn = _invokeEndpointFn;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}